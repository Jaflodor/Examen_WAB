{"version":3,"sources":["../../../widgets/Parroquias_Galicia/Widget.js"],"names":["define","declare","BaseWidget","lang","query","QueryTask","SpatialReference","graphic","SimpleFillSymbol","Color","SimpleLineSymbol","baseClass","postCreate","inherited","arguments","console","log","startup","onOpen","lista_concejos","cod_provincia","buscador_provincias","value","buscador_concejos","innerHTML","consultaTask","config","Concejos","consulta","returnGeometry","outFields","orderByFields","where","execute","hitch","evt","opciones","document","createElement","text","add","i","features","length","attributes","CODCONC","CONCELLO","lista_parroquias","cod_concejo","consultaTaskk","Parroquias","consultaa","buscador_parroquias","PARROQUIA","zoomConcejos","outSpatialReference","geometria","geometry","map","graphics","clear","STYLE_SOLID","STYLE_SHORTDASHDOTDOT","setExtent","getExtent","zoomParroquias","cod_parroquia","onClose","onMinimize"],"mappings":"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","file":"Widget.js","sourcesContent":["define(['dojo/_base/declare', 'jimu/BaseWidget', \"dojo/_base/lang\",\"esri/tasks/query\",\"esri/tasks/QueryTask\",\"esri/SpatialReference\", \"esri/graphic\",\"esri/symbols/SimpleFillSymbol\",\"esri/Color\", \"esri/symbols/SimpleLineSymbol\"],\r\nfunction(declare, BaseWidget, lang, query,QueryTask, SpatialReference, graphic, SimpleFillSymbol, Color, SimpleLineSymbol) {\r\n  //To create a widget, you need to derive from BaseWidget.\r\n  return declare([BaseWidget], {\r\n\r\n    // Custom widget code goes here\r\n\r\n    baseClass: 'parroquias-galicia',\r\n    // this property is set by the framework when widget is loaded.\r\n    // name: 'Parroquias_Galicia',\r\n    // add additional properties here\r\n\r\n    //methods to communication with app container:\r\n    postCreate: function() {\r\n      this.inherited(arguments);\r\n      console.log('Parroquias_Galicia::postCreate');\r\n    },\r\n\r\n    startup: function() {\r\n      this.inherited(arguments);\r\n      console.log('Parroquias_Galicia::startup');\r\n    },\r\n\r\n    onOpen: function(){\r\n      console.log('Parroquias_Galicia::onOpen');\r\n\r\n    },\r\n\r\n    lista_concejos(){\r\n\r\n      var cod_provincia = this.buscador_provincias.value;\r\n\r\n      console.log(cod_provincia);\r\n\r\n      if(cod_provincia == -1) return;\r\n\r\n      this.buscador_concejos.innerHTML=\"\";\r\n\r\n      var consultaTask = new QueryTask (this.config.Concejos)\r\n\r\n      var consulta = new query();\r\n\r\n      consulta.returnGeometry = false;\r\n      consulta.outFields = [\"CODCONC\",\"CONCELLO\"];\r\n      consulta.orderByFields = [\"CONCELLO\"];\r\n      consulta.where = \"CODPROV = \" + cod_provincia;\r\n\r\n      consultaTask.execute(consulta, lang.hitch(this,function(evt){\r\n\r\n        var opciones = document.createElement(\"option\")\r\n        opciones.value = -1;\r\n        opciones.text = \"Seleccione un Concejo\";\r\n        this.buscador_concejos.add(opciones)\r\n\r\n\r\n        for (let i = 0; i < evt.features.length; i++){\r\n\r\n          opciones = document.createElement(\"option\");\r\n          opciones.value = evt.features[i].attributes.CODCONC;\r\n          opciones.text = evt.features[i].attributes.CONCELLO;\r\n          this.buscador_concejos.add(opciones)\r\n\r\n          console.log(opciones)\r\n  \r\n        }\r\n\r\n\r\n      })); \r\n\r\n\r\n\r\n    },\r\n\r\n    lista_parroquias(){\r\n\r\n      console.log(this.buscador_concejos)\r\n\r\n      var cod_concejo = this.buscador_concejos.value;\r\n\r\n      console.log(cod_concejo);\r\n\r\n      if(cod_concejo == -1) return;\r\n\r\n      // this.buscador_concejos.innerHTML=\"\";\r\n\r\n      var consultaTaskk = new QueryTask (this.config.Parroquias)\r\n\r\n      var consultaa = new query();\r\n\r\n      consultaa.returnGeometry = false;\r\n      consultaa.outFields = [\"CODCONC\",\"PARROQUIA\"];\r\n      consultaa.orderByFields = [\"PARROQUIA\"];\r\n      consultaa.where = \"CODCONC = \" + cod_concejo;\r\n\r\n      consultaTaskk.execute(consultaa, lang.hitch(this,function(evt){\r\n\r\n        var opciones = document.createElement(\"option\")\r\n        opciones.value = -1;\r\n        opciones.text = \"Seleccione una Parroquia\";\r\n        this.buscador_parroquias.add(opciones)\r\n\r\n\r\n        for (let i = 0; i < evt.features.length; i++){\r\n\r\n          opciones = document.createElement(\"option\");\r\n          opciones.value = evt.features[i].attributes.CODCONC;\r\n          opciones.text = evt.features[i].attributes.PARROQUIA;\r\n          this.buscador_parroquias.add(opciones)\r\n  \r\n        }\r\n\r\n\r\n      }))\r\n\r\n\r\n    },\r\n\r\n    zoomConcejos(){\r\n\r\n      \r\n      var cod_concejo = this.buscador_concejos.value;\r\n      \r\n      if(cod_concejo == -1) return;\r\n\r\n      // this.buscador_concejos.innerHTML=\"\";\r\n\r\n      var consultaTask = new QueryTask (this.config.Concejos)\r\n\r\n      var consulta = new query();\r\n\r\n      consulta.returnGeometry = true;\r\n      consulta.outFields = [\"CODCONC\",\"CONCELLO\"];\r\n      consulta.orderByFields = [\"CONCELLO\"];\r\n      consulta.where = \"CODCONC = \" + cod_concejo;\r\n      consulta.outSpatialReference = new SpatialReference (102100);\r\n\r\n      consultaTask.execute(consulta, lang.hitch(this,function(evt){\r\n\r\n        console.log(evt)\r\n\r\n        if(evt.features.length > 0){\r\n\r\n          var geometria = evt.features[0].geometry;\r\n          this.map.graphics.clear();\r\n          this.map.graphics.add(new graphic (geometria, new SimpleFillSymbol(SimpleFillSymbol.STYLE_SOLID,\r\n            new SimpleLineSymbol (SimpleLineSymbol.STYLE_SHORTDASHDOTDOT,\r\n              new Color([234, 152, 223]), 2),new Color([235, 141, 106,0.25])\r\n              )))\r\n          this.map.setExtent(geometria.getExtent(), true)\r\n        }        \r\n\r\n\r\n      }))\r\n\r\n\r\n\r\n    },\r\n\r\n    zoomParroquias(){\r\n\r\n      var cod_parroquia = this.buscador_parroquias.value;\r\n      \r\n      if(cod_parroquia == -1) return;\r\n\r\n      // this.buscador_concejos.innerHTML=\"\";\r\n\r\n      var consultaTask = new QueryTask (this.config.Parroquias)\r\n\r\n      var consulta = new query();\r\n\r\n      consulta.returnGeometry = true;\r\n      consulta.outFields = [\"CODCONC\",\"PARROQUIA\"];\r\n      consulta.orderByFields = [\"PARROQUIA\"];\r\n      consulta.where = \"CODCONC = \" + cod_parroquia;\r\n      consulta.outSpatialReference = new SpatialReference (102100);\r\n\r\n      consultaTask.execute(consulta, lang.hitch(this,function(evt){\r\n\r\n        console.log(evt)\r\n\r\n        if(evt.features.length > 0){\r\n\r\n          var geometria = evt.features[0].geometry;\r\n          this.map.graphics.clear();\r\n          this.map.graphics.add(new graphic (geometria, new SimpleFillSymbol(SimpleFillSymbol.STYLE_SOLID,\r\n            new SimpleLineSymbol (SimpleLineSymbol.STYLE_SHORTDASHDOTDOT,\r\n              new Color([101, 133, 233]), 2),new Color([101, 226, 223,0.25])\r\n              )))\r\n          this.map.setExtent(geometria.getExtent(), true)\r\n        }        \r\n\r\n\r\n      }))\r\n\r\n    },\r\n\r\n    onClose: function(){\r\n      console.log('Parroquias_Galicia::onClose');\r\n    },\r\n\r\n    onMinimize: function(){\r\n      console.log('Parroquias_Galicia::onMinimize');\r\n    },\r\n\r\n    // onMaximize: function(){\r\n    //   console.log('Parroquias_Galicia::onMaximize');\r\n    // },\r\n\r\n    // onSignIn: function(credential){\r\n    //   console.log('Parroquias_Galicia::onSignIn', credential);\r\n    // },\r\n\r\n    // onSignOut: function(){\r\n    //   console.log('Parroquias_Galicia::onSignOut');\r\n    // }\r\n\r\n    // onPositionChange: function(){\r\n    //   console.log('Parroquias_Galicia::onPositionChange');\r\n    // },\r\n\r\n    // resize: function(){\r\n    //   console.log('Parroquias_Galicia::resize');\r\n    // }\r\n\r\n    //methods to communication between widgets:\r\n\r\n  });\r\n\r\n});\r\n"]}